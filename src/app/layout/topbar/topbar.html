<header
  class="h-16 bg-white border-b border-gray-200 flex items-center justify-between px-4 lg:px-8 z-40 shadow-sm"
>
  <div class="flex items-center">
    <button
      (click)="toggleMenu()"
      class="p-2 mr-4 text-gray-500 hover:bg-gray-100 rounded-lg lg:hidden"
      aria-label="Toggle sidebar"
    >
      <span class="material-symbols-outlined">menu</span>
    </button>

    <!-- Search Bar -->
    <div
      class="hidden md:flex items-center bg-gray-100 px-3 py-2 rounded-lg w-64 lg:w-96 focus-within:ring-2 focus-within:ring-[#135bec]/20 transition-all"
    >
      <span class="material-symbols-outlined text-gray-400 text-[20px]">search</span>
      <input
        type="text"
        placeholder="Search transactions, users..."
        class="bg-transparent border-none focus:ring-0 text-sm ml-2 w-full outline-none"
      />
    </div>
  </div>

  <!-- Actions -->
  <div class="flex items-center space-x-2 md:space-x-4 relative">
    <!-- Theme toggle -->
    <button
      class="p-2 text-gray-500 hover:bg-gray-100 rounded-full"
      (click)="toggleTheme()"
      aria-label="Toggle theme"
    >
      <span class="material-symbols-outlined text-[20px]">
        {{ (theme$ | async) === 'dark' ? 'dark_mode' : 'light_mode' }}
      </span>
    </button>

    <!-- Notifications -->
    <div class="relative">
      <button
        class="p-2 text-gray-500 hover:bg-gray-100 rounded-full relative"
        (click)="toggleNotifications()"
        aria-label="Notifications"
      >
        <span class="material-symbols-outlined text-[20px]">notifications</span>
        <span
          class="absolute top-2 right-2 w-2 h-2 bg-[#135bec] rounded-full border-2 border-white"
        ></span>
      </button>

      @if (notificationsOpen) {
        <div
          class="absolute right-0 mt-2 w-80 bg-white rounded-xl shadow-xl border border-gray-100 z-50"
        >
          <div class="px-4 py-3 border-b border-gray-100 flex items-center justify-between">
            <p class="text-sm font-semibold text-gray-800">Notifications</p>
            <span class="text-xs text-[#135bec] font-medium cursor-pointer">View all</span>
          </div>
          <ul class="max-h-72 overflow-y-auto custom-scrollbar">
            <li class="px-4 py-3 hover:bg-gray-50 flex items-start space-x-3 text-sm">
              <span
                class="material-symbols-outlined text-[#135bec] text-[20px] mt-0.5"
              >
                trending_up
              </span>
              <div>
                <p class="font-medium text-gray-800">Daily profit target reached</p>
                <p class="text-xs text-gray-500 mt-0.5">Today · 09:24</p>
              </div>
            </li>
            <li class="px-4 py-3 hover:bg-gray-50 flex items-start space-x-3 text-sm">
              <span class="material-symbols-outlined text-amber-500 text-[20px] mt-0.5">
                warning
              </span>
              <div>
                <p class="font-medium text-gray-800">3 credit requests in review</p>
                <p class="text-xs text-gray-500 mt-0.5">Today · 08:11</p>
              </div>
            </li>
            <li class="px-4 py-3 hover:bg-gray-50 flex items-start space-x-3 text-sm">
              <span class="material-symbols-outlined text-emerald-500 text-[20px] mt-0.5">
                verified_user
              </span>
              <div>
                <p class="font-medium text-gray-800">New insurance policy activated</p>
                <p class="text-xs text-gray-500 mt-0.5">Yesterday · 18:03</p>
              </div>
            </li>
          </ul>
        </div>
      }
    </div>

    <div class="h-8 w-px bg-gray-200 mx-2 hidden sm:block"></div>

    <!-- User -->
    <div class="relative">
      <button
        class="flex items-center cursor-pointer group p-1 hover:bg-gray-50 rounded-lg transition-colors"
        (click)="toggleUserMenu()"
        aria-label="User menu"
      >
        <div class="text-right mr-3 hidden sm:block">
          <p class="text-sm font-semibold text-gray-800 leading-tight">
            {{ userName }}
          </p>
          <p class="text-xs text-gray-500 uppercase tracking-wider">
            {{ userRole }}
          </p>
        </div>
        <div class="relative">
          <img
            src="https://ui-avatars.com/api/?name=Alex+Johnson&background=135bec&color=fff"
            class="h-9 w-9 rounded-full border-2 border-transparent group-hover:border-[#135bec] transition-all"
            alt="Profile"
          />
          <div
            class="absolute bottom-0 right-0 w-2.5 h-2.5 bg-green-500 rounded-full border-2 border-white"
          ></div>
        </div>
        <span class="material-symbols-outlined text-gray-400 ml-1 hidden sm:block">
          expand_more
        </span>
      </button>

      @if (userMenuOpen) {
        <div
          class="absolute right-0 mt-2 w-56 bg-white rounded-xl shadow-xl border border-gray-100 z-50 py-2"
        >
          <div class="px-4 py-2 border-b border-gray-100">
            <p class="text-sm font-semibold text-gray-800">
              {{ userName }}
            </p>
            <p class="text-xs text-gray-500">
              {{ userRole }}
            </p>
          </div>
          <button
            class="w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-50"
            type="button"
          >
            Profile
          </button>
          <button
            class="w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-50"
            type="button"
          >
            Settings
          </button>
          <button
            class="w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-red-50"
            type="button"
            (click)="logout()"
          >
            Logout
          </button>
        </div>
      }
    </div>
  </div>
</header>

