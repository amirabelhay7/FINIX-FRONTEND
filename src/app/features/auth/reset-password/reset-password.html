<div class="space-y-6">
  <div>
    <h2 class="text-xl font-semibold text-slate-900">Reset password</h2>
    <p class="mt-1 text-sm text-slate-500">
      Choose a new password for your FINIX account.
    </p>
  </div>

  @if (!success) {
    <form [formGroup]="form" (ngSubmit)="onSubmit()" class="space-y-5">
      <div>
        <label class="block text-xs font-semibold text-slate-600 mb-1">New password</label>
        <div
          class="relative flex items-center rounded-2xl border px-3 py-2.5 bg-white focus-within:border-[#135bec] focus-within:ring-2 focus-within:ring-[#135bec]/10"
          [class.border-red-400]="password.invalid && password.touched"
        >
          <span class="material-symbols-outlined text-slate-400 text-[20px] mr-2">lock</span>
          <input
            [type]="showPassword ? 'text' : 'password'"
            formControlName="password"
            placeholder="Create a strong password"
            class="w-full bg-transparent border-none outline-none text-sm text-slate-900 placeholder:text-slate-400"
          />
          <button
            type="button"
            class="ml-2 text-slate-400 hover:text-slate-600"
            (click)="togglePasswordVisibility()"
          >
            <span class="material-symbols-outlined text-[20px]">
              {{ showPassword ? 'visibility_off' : 'visibility' }}
            </span>
          </button>
        </div>
        @if (password.invalid && password.touched) {
          <p class="mt-1 text-xs text-red-500">
            Password must be at least 6 characters.
          </p>
        }
      </div>

      <div>
        <label class="block text-xs font-semibold text-slate-600 mb-1">Confirm password</label>
        <div
          class="relative flex items-center rounded-2xl border px-3 py-2.5 bg-white focus-within:border-[#135bec] focus-within:ring-2 focus-within:ring-[#135bec]/10"
          [class.border-red-400]="(confirmPassword.invalid && confirmPassword.touched) || form.hasError('mismatch')"
        >
          <span class="material-symbols-outlined text-slate-400 text-[20px] mr-2">lock</span>
          <input
            [type]="showConfirmPassword ? 'text' : 'password'"
            formControlName="confirmPassword"
            placeholder="Repeat your password"
            class="w-full bg-transparent border-none outline-none text-sm text-slate-900 placeholder:text-slate-400"
          />
          <button
            type="button"
            class="ml-2 text-slate-400 hover:text-slate-600"
            (click)="toggleConfirmPasswordVisibility()"
          >
            <span class="material-symbols-outlined text-[20px]">
              {{ showConfirmPassword ? 'visibility_off' : 'visibility' }}
            </span>
          </button>
        </div>
        @if (form.hasError('mismatch') && confirmPassword.touched) {
          <p class="mt-1 text-xs text-red-500">
            Passwords do not match.
          </p>
        }
      </div>

      <button
        type="submit"
        class="w-full inline-flex items-center justify-center rounded-2xl bg-[#135bec] text-white text-sm font-semibold py-3 shadow-lg shadow-blue-200 hover:shadow-xl transition-shadow disabled:opacity-50"
        [disabled]="form.invalid || submitting"
      >
        <span class="material-symbols-outlined text-[18px] mr-2">lock_reset</span>
        {{ submitting ? 'Updating password...' : 'Update password' }}
      </button>
    </form>
  } @else {
    <div class="rounded-2xl border border-emerald-100 bg-emerald-50 px-4 py-3 text-sm text-emerald-800">
      <div class="flex items-start gap-2">
        <span class="material-symbols-outlined text-[20px] mt-0.5">check_circle</span>
        <p>
          Your password has been reset successfully. You can now use it to log in to your account.
        </p>
      </div>
    </div>
  }

  <div class="flex items-center justify-between text-xs text-slate-500">
    <a routerLink="/auth/login" class="hover:text-[#135bec] font-medium">Back to login</a>
    <a routerLink="/auth/register" class="hover:text-[#135bec] font-medium">Create an account</a>
  </div>
</div>

