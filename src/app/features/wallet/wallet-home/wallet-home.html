<div class="wallet-page">
  <header class="wallet-header">
    <div class="wallet-header-inner">
      <span class="wallet-header-icon material-symbols-outlined">account_balance_wallet</span>
      <div class="wallet-header-text">
        <h1 class="wallet-title">{{ pageTitle }}</h1>
        <p class="wallet-subtitle">{{ pageSubtitle }}</p>
      </div>
      <div class="wallet-header-actions" *ngIf="!loading && !error">
        <span class="wallet-ledger-pill">
          <span class="wallet-ledger-dot"></span>
          {{ ledgerStatus }}
        </span>
        <a routerLink="/wallet/deposit" class="btn-top-up">
          <span class="material-symbols-outlined">add</span>
          Top up
        </a>
      </div>
    </div>
  </header>

  <div *ngIf="loading" class="wallet-loading">
    <span class="material-symbols-outlined wallet-spin">progress_activity</span>
    <p>Loading walletâ€¦</p>
  </div>

  <div *ngIf="!loading && error" class="wallet-error">
    <span class="material-symbols-outlined">error</span>
    <p>{{ error }}</p>
  </div>

  <ng-container *ngIf="!loading && !error">
    <div class="wallet-main">
      <div class="wallet-balance-card">
        <div class="wallet-balance-bg"></div>
        <div class="wallet-balance-content">
          <div class="wallet-balance-top">
            <div>
              <p class="wallet-balance-label">Available balance</p>
              <h2 class="wallet-balance-amount">
                {{ balance.amountWhole }}<span class="wallet-balance-decimals">{{ balance.amountDecimals }}</span>
                <span class="wallet-balance-currency">{{ balance.currency }}</span>
              </h2>
            </div>
            <div class="wallet-balance-icon-wrap">
              <span class="material-symbols-outlined">account_balance_wallet</span>
            </div>
          </div>
          <div class="wallet-balance-stats">
            <div class="wallet-stat">
              <span class="material-symbols-outlined wallet-stat-icon inflow">trending_up</span>
              <p class="wallet-stat-label">In (30d)</p>
              <p class="wallet-stat-value">{{ balance.inflow30d }}</p>
            </div>
            <div class="wallet-stat">
              <span class="material-symbols-outlined wallet-stat-icon outflow">trending_down</span>
              <p class="wallet-stat-label">Out (30d)</p>
              <p class="wallet-stat-value">{{ balance.outflow30d }}</p>
            </div>
            <div class="wallet-stat">
              <p class="wallet-stat-label">Account</p>
              <p class="wallet-stat-value wallet-stat-account">{{ balance.accountMask }}</p>
            </div>
          </div>
        </div>
      </div>

      <div class="wallet-quick-actions">
        <a *ngFor="let action of quickActions" [routerLink]="action.route" class="wallet-action-card">
          <div class="wallet-action-icon" [ngClass]="action.iconBgClass">
            <span class="material-symbols-outlined" [ngClass]="action.iconColorClass">{{ action.icon }}</span>
          </div>
          <div class="wallet-action-body">
            <p class="wallet-action-title">{{ action.title }}</p>
            <p class="wallet-action-desc">{{ action.description }}</p>
          </div>
          <span class="material-symbols-outlined wallet-action-chevron">chevron_right</span>
        </a>
      </div>
    </div>

    <section class="wallet-recent">
      <div class="wallet-recent-header">
        <h3 class="wallet-recent-title">
          <span class="material-symbols-outlined">receipt_long</span>
          Recent transactions
        </h3>
        <a routerLink="/wallet/transactions" class="wallet-recent-link">View all</a>
      </div>
      <div class="wallet-recent-list">
        <a *ngFor="let tx of recentTransactions" [routerLink]="tx.id ? ['/wallet/transactions', tx.id] : []" class="wallet-tx-row">
          <div class="wallet-tx-icon" [ngClass]="tx.iconBgClass">
            <span class="material-symbols-outlined" [ngClass]="tx.iconColorClass">{{ tx.icon }}</span>
          </div>
          <div class="wallet-tx-body">
            <p class="wallet-tx-title">{{ tx.title }}</p>
            <p class="wallet-tx-subtitle">{{ tx.subtitle }}</p>
          </div>
          <span class="wallet-tx-amount" [class.positive]="tx.amountPositive" [class.negative]="!tx.amountPositive">{{ tx.amount }}</span>
        </a>
      </div>
      <div *ngIf="recentTransactions.length === 0" class="wallet-recent-empty">
        <span class="material-symbols-outlined">receipt_long</span>
        <p>No recent transactions</p>
        <a routerLink="/wallet/transactions" class="wallet-recent-empty-link">View full ledger</a>
      </div>
    </section>
  </ng-container>
</div>
