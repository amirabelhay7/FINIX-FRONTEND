<div class="achievements-admin-page">
  <header class="achievements-header">
    <div class="achievements-header-left">
      <div class="achievements-header-icon-wrap">
        <span class="material-symbols-outlined">emoji_events</span>
      </div>
      <div>
        <h1 class="achievements-title">{{ pageTitle }}</h1>
        <p class="achievements-subtitle">{{ pageSubtitle }}</p>
      </div>
    </div>
    <a routerLink="/admin/scoring/achievements/new" class="achievements-add-btn">
      <span class="material-symbols-outlined">add</span>
      {{ addAchievementLabel }}
    </a>
  </header>

  <div *ngIf="loading" class="achievements-loading">
    <span class="material-symbols-outlined">progress_activity</span>
    <p>Loading achievementsâ€¦</p>
  </div>

  <div *ngIf="!loading && error" class="achievements-error">
    <span class="material-symbols-outlined">error</span>
    <p>{{ error }}</p>
    <button type="button" class="achievements-retry" (click)="loadAchievements()">Retry</button>
  </div>

  <ng-container *ngIf="!loading && !error">
    <div class="achievements-stats">
      <div class="achievements-stat">
        <p class="achievements-stat-value">{{ achievements.length }}</p>
        <p class="achievements-stat-label">Achievements</p>
      </div>
      <div class="achievements-stat">
        <p class="achievements-stat-value">{{ filteredRows.length }}</p>
        <p class="achievements-stat-label">Showing</p>
      </div>
    </div>

    <div class="achievements-card">
      <div class="achievements-toolbar">
        <div class="achievements-search-wrap">
          <span class="material-symbols-outlined">search</span>
          <input type="text" [(ngModel)]="searchText" [placeholder]="searchPlaceholder" class="achievements-search-input" />
        </div>
        <select [(ngModel)]="typeFilter" class="achievements-filter-select">
          <option *ngFor="let opt of typeFilterOptions" [value]="opt.value">{{ opt.label }}</option>
        </select>
      </div>
      <div class="achievements-table-wrap">
        <table class="achievements-table">
          <thead>
            <tr>
              <th>ID</th>
              <th>Title</th>
              <th>Type</th>
              <th>Points</th>
              <th>Status</th>
              <th class="text-right">Actions</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let row of filteredRows">
              <td class="achievements-cell-id">{{ row.id }}</td>
              <td class="achievements-cell-title">{{ row.title }}</td>
              <td>{{ row.type }}</td>
              <td class="achievements-cell-points">{{ row.points }}</td>
              <td>
                <span class="achievements-pill" [ngClass]="row.status === 'ACTIVE' || row.status === 'Success' ? 'achievements-pill-active' : 'achievements-pill-inactive'">{{ row.status }}</span>
              </td>
              <td>
                <div class="achievements-actions">
                  <a [routerLink]="row.editRoute" class="achievements-action-link">{{ editLabel }}</a>
                  <button type="button" class="achievements-action-btn achievements-action-btn-red" (click)="deleteAchievement(row.id)">{{ deleteLabel }}</button>
                </div>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
      <p *ngIf="filteredRows.length === 0" class="achievements-empty">No achievements match your filters.</p>
    </div>
  </ng-container>
</div>
