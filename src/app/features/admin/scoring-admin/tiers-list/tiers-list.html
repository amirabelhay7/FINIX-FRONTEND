<div class="tiers-admin-page">
  <header class="tiers-header">
    <div class="tiers-header-left">
      <div class="tiers-header-icon-wrap">
        <span class="material-symbols-outlined">workspace_premium</span>
      </div>
      <div>
        <h1 class="tiers-title">{{ pageTitle }}</h1>
        <p class="tiers-subtitle">{{ pageSubtitle }}</p>
      </div>
    </div>
    <a [routerLink]="addTierRoute" class="tiers-add-btn">
      <span class="material-symbols-outlined">add</span>
      {{ addTierLabel }}
    </a>
  </header>

  <div *ngIf="loading" class="tiers-loading">
    <span class="material-symbols-outlined">progress_activity</span>
    <p>Loading tiersâ€¦</p>
  </div>

  <div *ngIf="!loading && error" class="tiers-error">
    <span class="material-symbols-outlined">error</span>
    <p>{{ error }}</p>
    <button type="button" class="tiers-retry" (click)="loadTiers()">Retry</button>
  </div>

  <ng-container *ngIf="!loading && !error">
    <div class="tiers-stats">
      <div class="tiers-stat">
        <p class="tiers-stat-value">{{ tiers.length }}</p>
        <p class="tiers-stat-label">Tiers</p>
      </div>
      <div class="tiers-stat">
        <p class="tiers-stat-value">{{ activeTiersCount }}</p>
        <p class="tiers-stat-label">Active</p>
      </div>
    </div>

    <div class="tiers-card">
      <div class="tiers-table-wrap">
        <table class="tiers-table">
          <thead>
            <tr>
              <th>ID</th>
              <th>Tier name</th>
              <th>Score range</th>
              <th>Status</th>
              <th class="text-right">Actions</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let row of rows">
              <td class="tiers-cell-id">{{ row.id }}</td>
              <td class="tiers-cell-name">{{ row.tierName }}</td>
              <td class="tiers-cell-range">{{ row.scoreRange }}</td>
              <td>
                <span class="tiers-pill" [ngClass]="row.status === 'Active' ? 'tiers-pill-active' : 'tiers-pill-inactive'">{{ row.status }}</span>
              </td>
              <td>
                <div class="tiers-actions">
                  <a [routerLink]="row.editRoute" class="tiers-action-link">{{ editLabel }}</a>
                  <button type="button" *ngIf="!row.isActive" class="tiers-action-btn tiers-action-btn-green" (click)="activate(row.id)">{{ activateLabel }}</button>
                  <button type="button" *ngIf="row.isActive" class="tiers-action-btn tiers-action-btn-orange" (click)="deactivate(row.id)">{{ deactivateLabel }}</button>
                  <button type="button" class="tiers-action-btn tiers-action-btn-red" (click)="deleteTier(row.id, $event)">{{ deleteLabel }}</button>
                </div>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </ng-container>
</div>
