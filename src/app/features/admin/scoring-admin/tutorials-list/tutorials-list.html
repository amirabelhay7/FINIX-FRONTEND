<div class="tutorials-admin-page">
  <header class="tutorials-header">
    <div class="tutorials-header-left">
      <div class="tutorials-header-icon-wrap">
        <span class="material-symbols-outlined">school</span>
      </div>
      <div>
        <h1 class="tutorials-title">{{ pageTitle }}</h1>
        <p class="tutorials-subtitle">{{ pageSubtitle }}</p>
      </div>
    </div>
    <a [routerLink]="'/admin/scoring/tutorials/new'" class="tutorials-add-btn">
      <span class="material-symbols-outlined">add</span>
      {{ addTutorialLabel }}
    </a>
  </header>

  <div *ngIf="loading" class="tutorials-loading">
    <span class="material-symbols-outlined">progress_activity</span>
    <p>Loading tutorialsâ€¦</p>
  </div>

  <div *ngIf="!loading && error" class="tutorials-error">
    <span class="material-symbols-outlined">error</span>
    <p>{{ error }}</p>
    <button type="button" class="tutorials-retry" (click)="loadTutorials()">Retry</button>
  </div>

  <ng-container *ngIf="!loading && !error">
    <div class="tutorials-stats">
      <div class="tutorials-stat">
        <p class="tutorials-stat-value">{{ tutorials.length }}</p>
        <p class="tutorials-stat-label">Tutorials</p>
      </div>
      <div class="tutorials-stat">
        <p class="tutorials-stat-value">{{ filteredRows.length }}</p>
        <p class="tutorials-stat-label">Showing</p>
      </div>
    </div>

    <div class="tutorials-card">
      <div class="tutorials-toolbar">
        <div class="tutorials-search-wrap">
          <span class="material-symbols-outlined">search</span>
          <input type="text" [(ngModel)]="searchText" [placeholder]="searchPlaceholder" class="tutorials-search-input" />
        </div>
        <select [(ngModel)]="typeFilter" class="tutorials-filter-select">
          <option *ngFor="let opt of typeFilterOptions" [value]="opt.value">{{ opt.label }}</option>
        </select>
      </div>
      <div class="tutorials-table-wrap">
        <table class="tutorials-table">
          <thead>
            <tr>
              <th>ID</th>
              <th>Title</th>
              <th>Type</th>
              <th>Points</th>
              <th>Difficulty</th>
              <th>Est. min</th>
              <th class="text-right">Actions</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let row of filteredRows">
              <td class="tutorials-cell-id">{{ row.id }}</td>
              <td class="tutorials-cell-title">{{ row.title }}</td>
              <td>{{ row.type }}</td>
              <td class="tutorials-cell-points">{{ row.points }}</td>
              <td>
                <span class="tutorials-pill" [ngClass]="'tutorials-pill-' + (row.difficulty === 'EASY' ? 'easy' : row.difficulty === 'MEDIUM' ? 'medium' : 'hard')">{{ row.difficulty }}</span>
              </td>
              <td>{{ row.estMin }}</td>
              <td>
                <div class="tutorials-actions">
                  <a [routerLink]="row.editRoute" class="tutorials-action-link">{{ editLabel }}</a>
                  <button type="button" class="tutorials-action-btn tutorials-action-btn-red" (click)="deleteTutorial(row.id)">{{ deleteLabel }}</button>
                </div>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
      <p *ngIf="filteredRows.length === 0" class="tutorials-empty">No tutorials match your filters.</p>
    </div>
  </ng-container>
</div>
