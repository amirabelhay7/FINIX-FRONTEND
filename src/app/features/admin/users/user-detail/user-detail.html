<div class="user-detail-page">
  <p *ngIf="error" class="error-banner">{{ error }}</p>

  <div *ngIf="loading" class="loading-wrap">
    <span class="material-symbols-outlined spin">progress_activity</span>
    <span>Loading user…</span>
  </div>

  <ng-container *ngIf="!loading && !error && vm.identityFields.length">
    <header class="detail-header">
      <a [routerLink]="vm.backRoute" class="back-link" aria-label="Back">
        <span class="material-symbols-outlined">arrow_back</span>
      </a>
      <div class="header-content">
        <h1 class="detail-title">{{ vm.pageTitle }}</h1>
        <p class="detail-subtitle">{{ vm.pageSubtitle }}</p>
      </div>
      <div class="header-actions">
        <a [routerLink]="vm.editRoute" class="btn-primary">{{ vm.editLabel }}</a>
        <button type="button" class="btn-danger" (click)="deleteUser()" [disabled]="deleting">
          {{ deleting ? 'Deleting…' : 'Delete' }}
        </button>
      </div>
    </header>

    <div class="detail-card">
      <h2 class="card-heading">
        <span class="material-symbols-outlined">person</span>
        {{ vm.identityTitle }}
      </h2>
      <dl class="detail-fields">
        <div *ngFor="let field of vm.identityFields" class="detail-field">
          <dt>{{ field.label }}</dt>
          <dd [ngClass]="field.valueClass">{{ field.value }}</dd>
        </div>
      </dl>
    </div>
  </ng-container>
</div>
