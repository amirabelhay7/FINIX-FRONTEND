<div class="user-form-page">
  <header class="form-header">
    <a [routerLink]="labels.backRoute" class="back-link" aria-label="Back">
      <span class="material-symbols-outlined">arrow_back</span>
    </a>
    <h1 class="form-title">{{ labels.pageTitle }}</h1>
  </header>

  <p *ngIf="error" class="error-banner">{{ error }}</p>

  <div *ngIf="loading" class="loading-wrap">
    <span class="material-symbols-outlined spin">progress_activity</span>
    <span>Loading…</span>
  </div>

  <form *ngIf="!loading" class="form-card" (ngSubmit)="submit()">
    <div class="form-grid">
      <div class="field">
        <label>{{ labels.labelFirstName }}</label>
        <input type="text" [(ngModel)]="firstName" name="firstName" required />
      </div>
      <div class="field">
        <label>{{ labels.labelLastName }}</label>
        <input type="text" [(ngModel)]="lastName" name="lastName" required />
      </div>
    </div>
    <div class="field">
      <label>{{ labels.labelEmail }}</label>
      <input type="email" [(ngModel)]="email" name="email" required />
    </div>
    <div class="field">
      <label>Password <span *ngIf="!passwordRequired" class="optional">(leave blank to keep)</span></label>
      <input
        [type]="'password'"
        [(ngModel)]="password"
        name="password"
        [required]="passwordRequired"
        [placeholder]="isEdit ? 'Leave blank to keep current' : ''"
      />
    </div>
    <div class="field">
      <label>{{ labels.labelPhone }}</label>
      <input type="text" [(ngModel)]="phoneNumber" name="phoneNumber" inputmode="numeric" />
    </div>
    <div class="field">
      <label>{{ labels.labelCin }}</label>
      <input type="text" [(ngModel)]="cin" name="cin" inputmode="numeric" />
    </div>
    <div class="field">
      <label>Date of birth</label>
      <input type="date" [(ngModel)]="dateOfBirth" name="dateOfBirth" />
    </div>
    <div class="field">
      <label>{{ labels.labelRole }}</label>
      <select [(ngModel)]="role" name="role">
        <option *ngFor="let opt of labels.roleOptions" [value]="opt.value">{{ opt.label }}</option>
      </select>
    </div>
    <div class="field">
      <label>{{ labels.labelAddress }}</label>
      <input type="text" [(ngModel)]="address" name="address" />
    </div>
    <div class="field">
      <label>{{ labels.labelCity }}</label>
      <input type="text" [(ngModel)]="city" name="city" />
    </div>
    <div class="form-actions">
      <button type="submit" class="btn-primary" [disabled]="saving">
        {{ saving ? 'Saving…' : labels.saveLabel }}
      </button>
      <a [routerLink]="labels.cancelRoute" class="btn-secondary">{{ labels.cancelLabel }}</a>
    </div>
  </form>
</div>
